<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Éditeur Code</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f4f4f4;
        }
        .interactive-demo {
            width: 80%;
            height: 300px;
            background: #fff;
            border: 1px solid #ccc;
            padding: 10px;
            font-family: monospace;
            white-space: pre-wrap;
            outline: none;
            overflow-y: auto;
        }
    </style>
</head>
<body>

    <div class="interactive-demo" contenteditable="true" id="code-editor1">
        Écrivez votre code ici...
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            document.querySelectorAll(".interactive-demo").forEach(editor => {
                editor.addEventListener("keydown", function(e) {
                    if (e.key === "Tab") {
                        e.preventDefault();
                        const selection = window.getSelection();
                        const range = selection.getRangeAt(0);
                        const node = range.startContainer;
                        let offset = range.startOffset;

                        if (e.shiftKey) {
                            // Désindenter : Supprime 4 espaces au début de la ligne
                            let lineStart = node.textContent.lastIndexOf("\n", offset - 1) + 1;
                            if (node.textContent.startsWith("    ", lineStart)) {
                                node.textContent = node.textContent.substring(0, lineStart) +
                                    node.textContent.substring(lineStart + 4);
                                range.setStart(node, Math.max(lineStart, offset - 4));
                                range.setEnd(node, Math.max(lineStart, offset - 4));
                                selection.removeAllRanges();
                                selection.addRange(range);
                            }
                        } else {
                            // Ajouter une tabulation (4 espaces)
                            const tabNode = document.createTextNode("    ");
                            range.insertNode(tabNode);
                            range.setStartAfter(tabNode);
                            range.setEndAfter(tabNode);
                            selection.removeAllRanges();
                            selection.addRange(range);
                        }
                    }
                });
            });
        });
    </script>

</body>
</html>
